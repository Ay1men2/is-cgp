# IS-CGP â€” æ™ºå®‰å¯¹è¯æ²»ç†å¹³å°

**Intelligent Secure Conversation Governance Platform**

IS-CGP æ˜¯é¢å‘å†…ç½‘ / ç§æœ‰åŒ–éƒ¨ç½²çš„å¤§æ¨¡å‹å¯¹è¯æ²»ç†ä¸­é—´å±‚ï¼Œç›®æ ‡æ˜¯è®© **ä¸Šä¸‹æ–‡è¿›å…¥æ¨¡å‹çš„è·¯å¾„å¯æ§ã€å¯è§£é‡Šã€å¯å›æ”¾**ã€‚

æœ¬é¡¹ç›®å…³æ³¨çš„ä¸æ˜¯â€œæ¨¡å‹å¤šèªæ˜â€ï¼Œè€Œæ˜¯ï¼š  
**åœ¨å·¥ç¨‹ç³»ç»Ÿä¸­ï¼Œå“ªäº›ä¸Šä¸‹æ–‡ã€ä»¥ä»€ä¹ˆç†ç”±ã€åœ¨ä»€ä¹ˆçº¦æŸä¸‹ï¼Œè¢«é€å…¥æ¨¡å‹æ¨ç†ã€‚**

---

## 1) é¡¹ç›®å®šä½ï¼ˆPositioningï¼‰

IS-CGP æ˜¯ä¸€ä¸ª **æ²»ç†ä¸­é—´å±‚ï¼ˆGovernance Middlewareï¼‰**ï¼Œä½äºä¸šåŠ¡ç³»ç»Ÿä¸æ¨¡å‹æ¨ç†åç«¯ä¹‹é—´ï¼š

- ä¸Šæ¸¸ï¼šä¸šåŠ¡ç³»ç»Ÿ / ç°æœ‰èŠå¤© UI / å†…éƒ¨å·¥å…·  
- ä¸‹æ¸¸ï¼švLLM / llama.cpp / å…¶ä»–ç§æœ‰åŒ–æ¨ç†å¼•æ“  

IS-CGP **ä¸å‚ä¸æ¨¡å‹æ¨ç†**ï¼Œè€Œæ˜¯è´Ÿè´£ï¼š

- ä¸Šä¸‹æ–‡çš„**é€‰æ‹©ã€è¿‡æ»¤ã€è£å†³**
- å†³ç­–è¿‡ç¨‹çš„**è®°å½•ã€å®¡è®¡ã€å›æ”¾**
- é•¿ä¸Šä¸‹æ–‡åœºæ™¯ä¸‹çš„**é¢„ç®—ä¸é™çº§æ§åˆ¶**

> æ ¸å¿ƒå…³é”®è¯ï¼š  
> **Governance Middleware / On-Prem / RLM Pipeline / Auditable Context Assembly**

---

## 2) æˆ‘ä»¬è§£å†³çš„é—®é¢˜ï¼ˆWhyï¼‰

åœ¨ç»„ç»‡å†…éƒ¨ï¼Œå¤§æ¨¡å‹ä»â€œå•äººå®éªŒâ€è¿›å…¥â€œå¤šäººã€å¤šé¡¹ç›®ã€é•¿æœŸè¿è¡Œâ€é˜¶æ®µåï¼Œé—®é¢˜ä¼šä»â€œæ¨ç†èƒ½åŠ›â€è½¬å‘â€œæ²»ç†èƒ½åŠ›â€ï¼š

- â— ä¸åŒé¡¹ç›® / ä¼šè¯ä¹‹é—´çš„ **ä¸Šä¸‹æ–‡æ±¡æŸ“**
- â— æƒé™ã€ç­–ç•¥å˜æ›´å **å†å²ç»“æœä¸å¯è§£é‡Š**
- â— é•¿ä¸Šä¸‹æ–‡æˆæœ¬ä¸å¯æ§ï¼Œè´¨é‡æ³¢åŠ¨å¤§
- â— æ— æ³•å›ç­”ï¼š**â€œè¿™æ®µå†…å®¹ä¸ºä»€ä¹ˆä¼šè¿›æ¨¡å‹ï¼Ÿâ€**

IS-CGP çš„ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ª**ç‹¬ç«‹äºæ¨¡å‹çš„æ²»ç†å±‚**ï¼Œç¡®ä¿ï¼š

> **ä»»ä½•ä¸€æ¬¡æ¨ç†ï¼Œéƒ½å¯ä»¥å›ç­”ï¼š  
>ã€Œä¸Šä¸‹æ–‡ä»å“ªé‡Œæ¥ï¼Ÿä¸ºä»€ä¹ˆè¢«é€‰ä¸­ï¼Ÿç»è¿‡äº†å“ªäº›è£å†³ï¼Ÿã€**

---

## 3) IS-CGP ä¸æ˜¯ä»€ä¹ˆï¼ˆBoundaryï¼‰

- âŒ ä¸æä¾›æ¨¡å‹æ¨ç†èƒ½åŠ›ï¼ˆä¸å†…ç½®æ¨¡å‹ï¼‰
- âŒ ä¸æä¾›èŠå¤© UI æˆ–å‰ç«¯äº§å“
- âŒ ä¸æ˜¯ Agent / AutoGPT æ¡†æ¶
- âŒ ä¸æ˜¯å…¬ç½‘ SaaS

IS-CGP ä¸“æ³¨äº **å·¥ç¨‹åŒ–ã€å¯æ²»ç†çš„ä¸Šä¸‹æ–‡å†³ç­–å±‚**ã€‚

---

## 4) æ ¸å¿ƒèƒ½åŠ›æ¦‚è§ˆï¼ˆCapability Snapshotï¼‰

- **é¡¹ç›® / ä¼šè¯çº§éš”ç¦»**
  - artifact æ˜ç¡®å½’å± project / session / global
- **RLM æ²»ç†æµæ°´çº¿**
  - Retrieval â†’ Plan â†’ Examine â†’ Decision â†’ Assemble
- **å¯å®¡è®¡è¯æ®é“¾**
  - æ¯ä¸€æ¬¡è¿è¡Œå®Œæ•´å†™å…¥ `rlm_runs`
- **é•¿ä¸Šä¸‹æ–‡æ²»ç†**
  - Top-Kã€token é¢„ç®—ã€fallback è·¯å¾„
- **å¯é‡å¤æ¼”ç¤º**
  - demo æ”¯æŒ API / direct runner ä¸¤æ¡è·¯å¾„

---

## 5) ç³»ç»Ÿæ¶æ„ï¼ˆArchitectureï¼‰

```

ä¸šåŠ¡ç³»ç»Ÿ / ç°æœ‰èŠå¤© UI
â†“
IS-CGP
(RLM Governance Pipeline)
â†“
æ¨¡å‹æ¨ç†åç«¯
(vLLM / llama.cpp / others)

```

IS-CGP ä¸æ¨ç†å¼•æ“ **å®Œå…¨è§£è€¦**ï¼Œé€šè¿‡ adapter æ–¹å¼æ¥å…¥ã€‚

---

## 6) RLM å·¥ç¨‹å®ç°ï¼ˆä»¥ä»£ç ä¸ºå‡†ï¼‰

### 6.1 æ ¸å¿ƒæ•°æ®å¯¹è±¡

#### artifactsï¼ˆæ²»ç†è¾“å…¥èµ„äº§ï¼‰

ä»£è¡¨**å¯è¢«æ²»ç†çš„ä¸Šä¸‹æ–‡æ¥æº**ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š

- `doc`ï¼šæ–‡æ¡£
- `code`ï¼šä»£ç ç‰‡æ®µ
- `note`ï¼šç»“æ„åŒ–è¯´æ˜
- `cache`ï¼šä¸­é—´ç»“æœ

å…³é”®å­—æ®µï¼š
- `project_id / session_id`
- `scope`ï¼š`global / project / session`
- `content / content_hash`
- `token_estimate`
- `metadata (jsonb)`

#### rlm_runsï¼ˆæ²»ç†è¿è¡Œè®°å½•ï¼‰

æ¯ä¸€æ¬¡ RLM æ‰§è¡Œéƒ½ä¼šç”Ÿæˆä¸€æ¡è®°å½•ï¼Œç”¨äºå®¡è®¡ä¸å›æ”¾ï¼š

- `options`ï¼šè¿è¡Œå‚æ•°
- `rounds`ï¼šä¸‰è½®è£å†³çš„è¾“å…¥è¾“å‡º
- `evidence`ï¼šå–è¯ç»“æœ
- `assembled_context`
- `status / errors`

---

### 6.2 RLM ä¸»æµç¨‹ï¼ˆå½“å‰ä»£ç è·¯å¾„ï¼‰

> ç›®æ ‡ï¼š**ä¸¤åˆ†é’Ÿ demo èƒ½å®Œæ•´è·‘é€šä¸‰è½®æ²»ç†å¹¶è½åº“**

#### Step 1 â€” Retrievalï¼ˆå€™é€‰å¬å›ï¼‰

- ä» `artifacts` è¡¨ä¸­ï¼ŒæŒ‰ä»¥ä¸‹ç»´åº¦å¬å›å€™é€‰ï¼š
  - project_id
  - scope âˆˆ {session, project, global}
  - type ç™½åå•
- SQL å±‚å®ŒæˆåŸºç¡€è¿‡æ»¤ä¸æ’åº
- è¿”å› Top-K candidatesï¼ˆå¯é…ç½®ï¼‰

#### Step 2 â€” Planï¼ˆè§„åˆ’ï¼‰

- å½“å‰é˜¶æ®µæ”¯æŒ mock / LLM ä¸¤ç§æ¨¡å¼
- è¾“å‡ºç»“æ„åŒ–è®¡åˆ’ï¼Œä¾‹å¦‚ï¼š
  - é€‰æ‹©å“ªäº›å€™é€‰
  - æ˜¯å¦éœ€è¦ examine
- ç»“æœå†™å…¥ `round1` metadata

#### Step 3 â€” Examineï¼ˆå–è¯ï¼‰

- æŒ‰è®¡åˆ’æŠ½å– artifact çš„ **preview**
- å…¸å‹è¡Œä¸ºï¼š
  - æˆªå–å‰ N chars
  - å…³é”®è¯å‘½ä¸­ç»Ÿè®¡
- ç»“æœä½œä¸º evidence å†™å…¥

#### Step 4 â€” Decisionï¼ˆä¸‰è½®è£å†³ï¼‰

- è‡³å°‘åŒ…å«ï¼š
  - plan â†’ examine â†’ decision
- æ¯ä¸€è½®éƒ½æœ‰ï¼š
  - `stage`
  - `mode`ï¼ˆmock / liveï¼‰
  - `status`
- å¯ fallbackï¼ˆAPI ä¸å¯è¾¾æ—¶èµ° direct runnerï¼‰

#### Step 5 â€” Assembleï¼ˆä¸Šä¸‹æ–‡ç»„è£…ï¼‰

- åŸºäºè£å†³ç»“æœç”Ÿæˆæœ€ç»ˆä¸Šä¸‹æ–‡
- å¯é€‰ç”Ÿæˆ prompt
- å†™å…¥ `assembled_context`

---

## 7) å·¥ç¨‹ç‰¹æ€§ï¼ˆEngineering Notesï¼‰

- **SQL ç¨³å®šæ€§**
  - æ˜¾å¼ `text[]` castï¼Œé¿å… `unnest(unknown)`
  - JSONB ä½¿ç”¨ `CAST(:param AS jsonb)`
- **å¹‚ç­‰ demo**
  - `ON CONFLICT DO NOTHING`
- **å†·å¯åŠ¨å‹å¥½**
  - æœ¬åœ°æ„å»ºé•œåƒï¼Œé¿å…è¿è¡Œæ—¶ pip install
- **å¥åº·æ£€æŸ¥**
  - `/healthz` + `start_period`

---

## 8) å½“å‰é˜¶æ®µçŠ¶æ€ï¼ˆProject Statusï¼‰

ğŸš§ **Active Development â€” å†…éƒ¨å·¥ç¨‹éªŒè¯é˜¶æ®µ**

### å·²å®Œæˆ
- FastAPI æœåŠ¡éª¨æ¶
- PostgreSQL / Redis
- Alembic è¿ç§»ä½“ç³»
- artifacts / rlm_runs è¡¨ç»“æ„
- RLM ä¸‰è½®é—­ç¯ï¼ˆmockï¼‰
- Docker å¯å¤ç° demo

### è¿›è¡Œä¸­ï¼ˆv0.2â€“v0.3ï¼‰
- Plan / Examine ç»“æ„åŒ–è¾“å‡º
- Redis examine cache
- LLM Judge åè®®
- vLLM æ¥å…¥ï¼ˆlive modeï¼‰

---

## 9) è·¯çº¿å›¾ï¼ˆRoadmapï¼‰

- **v0.2**ï¼šRLM MVPï¼ˆçœŸå® preview + è£å†³ï¼‰
- **v0.3**ï¼šç¼“å­˜æ²»ç†ã€é™çº§å®¹é”™
- **v1.0**ï¼šæ²»ç†æ§åˆ¶å° + è¿ç»´æ‰‹å†Œ

---

## Quickstartï¼ˆDocker, Reproducibleï¼‰

```bash
cp .env.example .env
docker compose -f infra/docker-compose.yml down -v
docker compose -f infra/docker-compose.yml up -d --build
docker compose -f infra/docker-compose.yml --profile demo run --rm --no-deps demo
docker compose -f infra/docker-compose.yml down -v
```

Notesï¼š

* backend å¯åŠ¨ä¼šå…ˆè·‘ Alembic è¿ç§»ï¼Œhealthcheck è®¾æœ‰ `start_period`
* demo æ˜¯ä¸€æ¬¡æ€§ä»»åŠ¡ï¼Œå»ºè®®ä½¿ç”¨ `--profile demo` + `--no-deps`

---

## License

Apache License 2.0

---

## åç§°å£°æ˜

â€œIS-CGPï¼ˆIntelligent Secure Conversation Governance Platformï¼‰â€ä¸ºé¡¹ç›®åç§°ã€‚
Fork æˆ–è¡ç”Ÿé¡¹ç›®ä¸å¾—åœ¨æœªæˆæƒæƒ…å†µä¸‹ä½¿ç”¨è¯¥åç§°æš—ç¤ºå®˜æ–¹å…³ç³»ã€‚

---
